{"version":3,"sources":["sarine.viewer.core.bundle.js"],"names":["ViewerManger","option","fromTag","toTag","stoneViews","template","jsons","logicRoot","window","cacheVersion","configuration","viewersBaseUrl","allViewresList","viewers","this","bind","loadTemplate","bindElementToSelector","addViewer","existInConfig","findAttribute","getPath","logicPath","recurse","prototype","Error","src","arr","split","pop","join","selector","arrDefer","defer","_t","$","Deferred","document","viewersList","JSON","parse","stringify","find","each","_this","i","v","active","attr","coordinates","menu","order","toElement","type","_i","_len","_ref","attributes","length","data","name","value","version","id","addClass","replaceWith","push","$el","text","when","apply","then","resolve","o","props","shift","obj","ns","deferArr","scripts","load","a","b","c","prepend","filter","tagName","replace","location","origin","pathname","getScript","append","remove","href","trigger","experiences","atom","callbackPic","path","s","url","ajaxSetup","async","getJSON","d","instance","args","imagesArr","hash","indexOf","appendTo","end","onload","inst","eval","extend","element","stoneProperties","baseUrl","getViewers","sortByOrder","viewersArr","forEach","init_list","list","method","current","pmId","_list","_method","Id","first_init","full_init","stop","play","call","ResourceManager","console","log","_timeoutManager","TimeoutManager","_imageManger","ImageManger","_instance","getInstance","viewerImagesObj","loadImage","viewer","img","capacity","downloadLimit","bag","threshhold","parseInt","Image","crossOrigin","e","index","popped","inArray","toLowerCase","target","splice","onerror","funcArr","add","delay","callback","item","setTimeout","temp","unique","map"],"mappings":"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","file":"sarine.viewer.core.bundle.min.js"}